Test EquipmentTest EquipmentRequired SoftwareRequired Software{% macro as_table(rows, headers=None) %}
    <table>
        {% if headers %}
            <tr>
                {% for col in headers %}
                    <th>{{ col.replace("_", " ").title() }}</th>
                {% endfor %}
            </tr>
        {% endif %}
        {% for row in rows %}
            <tr>
                {% for col in row %}
                    <td>{{ col }}</td>
                {% endfor %}
            </tr>
        {% endfor %}
    </table>
{% endmacro %}


<h1>Test Cases</h1>
{% for testcase in testcases %}
    <h2>
        <a href="{{ as_jira_test_anchor(testcase["key"]) }}">
            {{ testcase["key"] }}</a> - {{ testcase['name'] }}</h2>

    {{ as_table([testcase['summary'].values()], headers=testcase['summary'].keys()) }}

        <h3>Requirements</h3>
    {% if testcase.requirements %}
        <ul>
            {% for item in testcase.requirements %}
                <li>{{ item['anchor'] }} - {{ item['summary'] }}</li>
            {% endfor %}
        </ul>
    {% else %}
        None.
    {% endif %}

        <h3>Test Items</h3>
    {% if testcase.objective %}
        {{ testcase.objective }}
    {% endif %}

    {% if testcase.more_objectives %}
        {% for title, objective in testcase.more_objectives.items() %}
            <h4>{{ title.replace("_", " ").title() }}</h4>
            {{ objective }}
        {% endfor %}

    {% endif %}

        <h3>Intercase Dependencies</h3>
    {% if "Predecessors" in testcase["customFields"] %}
        {{ testcase["customFields"]["Predecessors"] }}
    {% endif %}

        <h3>Environment Needs</h3>

        <h4>Software</h4>
    {% if "Required Software" in testcase["customFields"] %}
        {{ testcase["customFields"]["Required Software"] }}
    {% endif %}

        <h4>Hardware</h4>
    {% if "Test Equipment" in testcase["customFields"] %}
        {{ testcase["customFields"]["Test Equipment"] }}
    {% endif %}

        <h3>Input Specification</h3>
    {% if "precondition" in testcase %}
        {{ testcase["precondition"] }}
    {% endif %}

        <h3>Output Specification</h3>
    {% if "Postcondition" in testcase["customFields"] %}
        {{ testcase["customFields"]["Postcondition"] }}
    {% endif %}

        <h3>Test Procedure</h3>
    {% if "testScript" in testcase %}
        {% for step in testcase['testScript']['steps'] %}
            <strong>Step {{ loop.index }}</strong>
            <br/>
            {{ step['description'] }}
            <br/>
            {% if 'testData' in step %}
                {{ step['testData'] }}
            {% endif %}
            <br/>
        {% endfor %}
    {% endif %}

{% endfor %}

